<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="login.css">
</head>

<body>
    <!-- Optional iframe background layer -->
    <iframe src="bg.html" class="background-iframe"></iframe>

    <div class="login-box">
        <h3 class="text-center mb-4">Admin Login</h3>
        <form id="adminLoginForm">
            <div class="mb-3">
                <label for="username" class="form-label">Username</label>
                <input type="text" class="form-control" id="username" required>
            </div>
            <div class="mb-3">
                <label for="password" class="form-label">Password</label>
                <div class="input-group">
                    <input type="password" class="form-control" id="password" required>
                    <button type="button" class="btn btn-outline-secondary" id="togglePassword">Show</button>
                </div>
            </div>
            <button type="submit" class="btn btn-primary w-100">Login</button>
            <button onclick="indexAction()" class="btn btn-primary w-100">Home</button>
        </form>
        <div id="loginStatus" class="mt-3 text-center"></div>
    </div>

    <script>
        const form = document.getElementById('adminLoginForm');
        const loginStatus = document.getElementById('loginStatus');
        const passwordInput = document.getElementById('password');
        const togglePassword = document.getElementById('togglePassword');
        const submitBtn = form.querySelector('button[type="submit"]');

        let attemptsLeft = 3;
        const LOCK_DURATION = 15 * 60 * 1000; // 15 minutes in ms
        const LOCK_KEY = 'adminLockTime';

        // Check lock status on load
        const lockTime = localStorage.getItem(LOCK_KEY);
        if (lockTime && Date.now() < parseInt(lockTime)) {
            const remaining = Math.ceil((parseInt(lockTime) - Date.now()) / 60000);
            loginStatus.innerHTML = `<span class="text-danger">‚è≥ Login is locked. Try again in ${remaining} minute(s).</span>`;
            submitBtn.disabled = true;
        }

        form.addEventListener('submit', function (e) {
            e.preventDefault();
            const username = document.getElementById('username').value.trim();
            const password = passwordInput.value.trim();

            // Check again before processing
            const storedLock = localStorage.getItem(LOCK_KEY);
            if (storedLock && Date.now() < parseInt(storedLock)) {
                loginStatus.innerHTML = '<span class="text-danger">‚ùå You are locked out. Please wait.</span>';
                submitBtn.disabled = true;
                return;
            }

            if (username === 'anmay' && password === 'anmay9661') {
                loginStatus.innerHTML = '<span class="text-success">‚úÖ Login successful. Redirecting to admin panel...</span>';
                localStorage.removeItem(LOCK_KEY); // clear lock
                setTimeout(() => {
                    window.location.href = 'admin.html';
                }, 1500);
            } else {
                attemptsLeft--;
                if (attemptsLeft > 0) {
                    loginStatus.innerHTML = `<span class="text-danger">‚ùå Invalid credentials. ${attemptsLeft} attempt(s) left.</span>`;
                } else {
                    // Set lockout
                    const unlockTime = Date.now() + LOCK_DURATION;
                    localStorage.setItem(LOCK_KEY, unlockTime);
                    loginStatus.innerHTML = '<span class="text-danger">üö´ Too many failed attempts. Login disabled for 15 minutes.</span>';
                    submitBtn.disabled = true;

                    // Auto redirect after 3 seconds
                    setTimeout(() => {
                        window.location.href = '1 index.html';
                    }, 3000);
                }
            }
        });

        togglePassword.addEventListener('click', function () {
            const type = passwordInput.getAttribute('type');
            passwordInput.setAttribute('type', type === 'password' ? 'text' : 'password');
            togglePassword.textContent = type === 'password' ? 'Hide' : 'Show';
        });
   
    
        // üö´ Block DevTools keys (F12, Ctrl+Shift+I, etc.)
        document.addEventListener('keydown', function (e) {
            if (
                e.key === 'F12' ||
                (e.ctrlKey && e.shiftKey && ['I', 'J', 'C', 'K', 'U'].includes(e.key.toUpperCase())) ||
                (e.ctrlKey && e.key.toLowerCase() === 'u')
            ) {
                e.preventDefault();
                alert("üîí Developer tools access is disabled.");
                return false;
            }
        });

        // üö´ Block right-click
        document.addEventListener('contextmenu', function (e) {
            e.preventDefault();
            alert("üîí Right-click is disabled.");
        });

        // üö´ Block mouse buttons (middle/right)
        document.addEventListener('mousedown', function (e) {
            if (e.button !== 0) { // 0 = left, 1 = middle, 2 = right
                e.preventDefault();
                alert("üõë Only left-click is allowed.");
                return false;
            }
        });

        // üïµÔ∏è‚Äç‚ôÇÔ∏è DevTools Detection (optional hardcore block)
        setInterval(() => {
            const widthThreshold = window.outerWidth - window.innerWidth > 160;
            const heightThreshold = window.outerHeight - window.innerHeight > 160;
            if (widthThreshold || heightThreshold) {
                document.body.innerHTML = "<h1 style='color:red;text-align:center;margin-top:20%'>üö´ Security breach detected.</h1>";
            }
        }, 1000);


        function indexAction() {
                window.location.href = "1 index.html";
            }
    </script>
      
</body>

</html>